{"_path":"/usage/composables/usesupabaseuser","_dir":"composables","_draft":false,"_partial":false,"_locale":"","_empty":false,"title":"useSupabaseUser","description":"Auto import and use your Supabase user with the useSupabaseUser composable","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"usesupabaseuser"},"children":[{"type":"text","value":"useSupabaseUser"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once logged in, you can "},{"type":"element","tag":"a","props":{"href":"https://nuxt.com/docs/guide/directory-structure/composables","rel":["nofollow"]},"children":[{"type":"text","value":"auto-import"}]},{"type":"text","value":" your user everywhere inside your vue files."}]},{"type":"element","tag":"code","props":{"className":["language-vue"],"code":"<script setup>\nconst user = useSupabaseUser()\n</script>\n","language":"vue","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-680237"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-970614"},"children":[{"type":"text","value":"setup"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":">\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-135336"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-484930"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-135336"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-970614"},"children":[{"type":"text","value":"useSupabaseUser"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"</"}]},{"type":"element","tag":"span","props":{"class":"ct-680237"},"children":[{"type":"text","value":"script"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":">"}]}]}]}]}]},{"type":"element","tag":"h2","props":{"id":"auth-middleware"},"children":[{"type":"text","value":"Auth middleware"}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"By default, the module is implementing a redirect middleware. All pages of your application are automatically redirected to the "},{"type":"element","tag":"a","props":{"href":"/get-started#redirectoptions"},"children":[{"type":"text","value":"login"}]},{"type":"text","value":" page. However, you can allow redirection to \"public\" pages by setting the "},{"type":"element","tag":"a","props":{"href":"/get-started#redirectoptions"},"children":[{"type":"text","value":"exclude"}]},{"type":"text","value":" redirect option."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If the "},{"type":"element","tag":"a","props":{"href":"/get-started#redirect"},"children":[{"type":"text","value":"redirect"}]},{"type":"text","value":" option is disabled, you can protect your authenticated routes by creating a custom middleware in your project, here is an example:"}]},{"type":"element","tag":"code","props":{"className":["language-ts"],"code":"export default defineNuxtRouteMiddleware((to, _from) => {\n  const user = useSupabaseUser()\n\n  if (!user.value) {\n    return navigateTo('/login')\n  }\n})\n","filename":"middleware/auth.ts","language":"ts","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-135336"},"children":[{"type":"text","value":"export"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-135336"},"children":[{"type":"text","value":"default"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-970614"},"children":[{"type":"text","value":"defineNuxtRouteMiddleware"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-684589"},"children":[{"type":"text","value":"to"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-684589"},"children":[{"type":"text","value":"_from"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-135336"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-135336"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-484930"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-135336"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-970614"},"children":[{"type":"text","value":"useSupabaseUser"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"()\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-135336"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-135336"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"user.value) {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-135336"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-970614"},"children":[{"type":"text","value":"navigateTo"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-497092"},"children":[{"type":"text","value":"'/login'"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":")\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"  }\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Then you can reference your middleware in your page with:"}]},{"type":"element","tag":"code","props":{"className":["language-ts"],"code":"definePageMeta({\n  middleware: 'auth'\n})\n","filename":"pages/dashboard.vue","language":"ts","meta":""},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"class":"ct-970614"},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"({\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"  middleware: "}]},{"type":"element","tag":"span","props":{"class":"ct-497092"},"children":[{"type":"text","value":"'auth'\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"class":"ct-948368"},"children":[{"type":"text","value":"})"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Learn more about "},{"type":"element","tag":"a","props":{"href":"https://nuxt.com/docs/guide/directory-structure/middleware","rel":["nofollow"]},"children":[{"type":"text","value":"Nuxt middleware"}]},{"type":"text","value":" and "},{"type":"element","tag":"a","props":{"href":"https://nuxt.com/docs/guide/directory-structure/pages#page-metadata","rel":["nofollow"]},"children":[{"type":"text","value":"definePageMeta"}]},{"type":"text","value":"."}]},{"type":"element","tag":"style","children":[{"type":"text","value":".dark .ct-948368{color:#E1E4E8;}\n.ct-948368{color:#24292E;}\n.dark .ct-680237{color:#85E89D;}\n.ct-680237{color:#22863A;}\n.dark .ct-970614{color:#B392F0;}\n.ct-970614{color:#6F42C1;}\n.dark .ct-135336{color:#F97583;}\n.ct-135336{color:#D73A49;}\n.dark .ct-484930{color:#79B8FF;}\n.ct-484930{color:#005CC5;}\n.dark .ct-684589{color:#FFAB70;}\n.ct-684589{color:#E36209;}\n.dark .ct-497092{color:#9ECBFF;}\n.ct-497092{color:#032F62;}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"auth-middleware","depth":2,"text":"Auth middleware"}]}},"_type":"markdown","_id":"content:3.usage:composables:useSupabaseUser.md","_source":"content","_file":"3.usage/composables/useSupabaseUser.md","_extension":"md"}